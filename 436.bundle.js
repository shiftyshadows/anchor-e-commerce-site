"use strict";(self.webpackChunkanchor_ecommerce_frontend=self.webpackChunkanchor_ecommerce_frontend||[]).push([[436],{3436:(e,n,r)=>{r.r(n),r.d(n,{default:()=>v});var t=r(6540),o=r(8087),a=r(5072),i=r.n(a),A=r(7825),l=r.n(A),s=r(7659),c=r.n(s),d=r(5056),m=r.n(d),u=r(540),E=r.n(u),p=r(1113),f=r.n(p),b=r(2514),g={};function B(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function C(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?B(Object(r),!0).forEach((function(n){h(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function h(e,n,r){return(n=function(e){var n=function(e){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof n?n:n+""}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}g.styleTagTransform=f(),g.setAttributes=m(),g.insert=c().bind(null,"head"),g.domAPI=l(),g.insertStyleElement=E(),i()(b.A,g),b.A&&b.A.locals&&b.A.locals;const v=()=>{const[e,n]=(0,t.useState)([]),[r,a]=(0,t.useState)(!0),[i,A]=(0,t.useState)(null);return(0,t.useEffect)((()=>{(async()=>{try{a(!0),A(null);const e=await o.A.get("/api/orders/user",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});n(e.data)}catch(n){var e;A((null===(e=n.response)||void 0===e||null===(e=e.data)||void 0===e?void 0:e.message)||"Failed to fetch orders. Please try again.")}finally{a(!1)}})()}),[]),r?t.createElement("p",{className:"loading"},"Loading..."):i?t.createElement("p",{className:"error"},i):t.createElement("div",{className:"order-history-container"},t.createElement("h2",null,"Order History"),0===e.length?t.createElement("p",null,"No orders found."):t.createElement("div",{className:"order-list"},e.map((e=>t.createElement("div",{key:e._id,className:"order-item"},t.createElement("h4",null,"Order ID: ",e._id),t.createElement("p",null,"Status: ",t.createElement("strong",null,e.status)),t.createElement("p",null,"Total: $",e.total.toFixed(2)),t.createElement("p",null,"Date: ",new Date(e.date).toLocaleString()),t.createElement("h5",null,"Items:"),t.createElement("ul",null,e.items.map((e=>t.createElement("li",{key:e._id},e.name," - $",e.price.toFixed(2)," x ",e.quantity)))),"Shipped"===e.status&&t.createElement("button",{className:"mark-as-delivered-button",onClick:()=>(async e=>{try{await o.A.patch("/api/orders/".concat(e),{status:"Delivered"},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}),alert("Order marked as Delivered!"),n((n=>n.map((n=>n._id===e?C(C({},n),{},{status:"Delivered"}):n))))}catch(e){var r,t;console.error("Failed to update order status:",(null===(r=e.response)||void 0===r?void 0:r.data)||e.message),alert((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.message)||"Failed to mark order as Delivered.")}})(e._id)},"Mark as Delivered"))))))}},8087:(e,n,r)=>{r.d(n,{A:()=>o});const t=r(1083).A.create({baseURL:"shiftyshadows.github.io",timeout:1e4});t.defaults.headers.common["Content-Type"]="application/json",t.interceptors.request.use((e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization="Bearer ".concat(n)),e}),(e=>Promise.reject(e))),t.interceptors.response.use((e=>e),(e=>(console.error("API Error:",e),Promise.reject(e))));const o=t},2514:(e,n,r)=>{r.d(n,{A:()=>A});var t=r(1354),o=r.n(t),a=r(6314),i=r.n(a)()(o());i.push([e.id,".order-history-container {\n  padding: 2rem;\n  background: #f9f9f9;\n  min-height: 100vh;\n}\n\nh2 {\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  color: #333;\n}\n\n.order-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.order-item {\n  padding: 1rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.order-item h4 {\n  font-size: 1.2rem;\n  color: #007bff;\n  margin-bottom: 0.5rem;\n}\n\n.order-item p {\n  font-size: 1rem;\n  color: #555;\n  margin-bottom: 0.5rem;\n}\n\n.order-item ul {\n  padding-left: 1.5rem;\n  color: #333;\n}\n\n.order-item ul li {\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n}\n\n.mark-as-delivered-button {\n  padding: 0.5rem 1rem;\n  font-size: 1rem;\n  color: white;\n  background: #28a745; /* Green for delivered */\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.mark-as-delivered-button:hover {\n  background: #218838;\n}\n\n.loading {\n  text-align: center;\n  font-size: 1.5rem;\n  color: #007bff;\n}\n\n.error {\n  text-align: center;\n  color: red;\n  font-size: 1.2rem;\n}\n","",{version:3,sources:["webpack://./src/styles/OrderHistory.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,iBAAiB;EACjB,kBAAkB;EAClB,wCAAwC;AAC1C;;AAEA;EACE,iBAAiB;EACjB,cAAc;EACd,qBAAqB;AACvB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,eAAe;EACf,YAAY;EACZ,mBAAmB,EAAE,wBAAwB;EAC7C,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,gCAAgC;AAClC;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;EAClB,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,kBAAkB;EAClB,UAAU;EACV,iBAAiB;AACnB",sourcesContent:[".order-history-container {\n  padding: 2rem;\n  background: #f9f9f9;\n  min-height: 100vh;\n}\n\nh2 {\n  font-size: 2rem;\n  margin-bottom: 1.5rem;\n  text-align: center;\n  color: #333;\n}\n\n.order-list {\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n}\n\n.order-item {\n  padding: 1rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n}\n\n.order-item h4 {\n  font-size: 1.2rem;\n  color: #007bff;\n  margin-bottom: 0.5rem;\n}\n\n.order-item p {\n  font-size: 1rem;\n  color: #555;\n  margin-bottom: 0.5rem;\n}\n\n.order-item ul {\n  padding-left: 1.5rem;\n  color: #333;\n}\n\n.order-item ul li {\n  font-size: 1rem;\n  margin-bottom: 0.5rem;\n}\n\n.mark-as-delivered-button {\n  padding: 0.5rem 1rem;\n  font-size: 1rem;\n  color: white;\n  background: #28a745; /* Green for delivered */\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: background 0.3s ease;\n}\n\n.mark-as-delivered-button:hover {\n  background: #218838;\n}\n\n.loading {\n  text-align: center;\n  font-size: 1.5rem;\n  color: #007bff;\n}\n\n.error {\n  text-align: center;\n  color: red;\n  font-size: 1.2rem;\n}\n"],sourceRoot:""}]);const A=i}}]);
//# sourceMappingURL=436.bundle.js.map